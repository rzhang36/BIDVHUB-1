"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[743],{90901:function(q,$,t){t.r($);var O=t(15009),I=t.n(O),z=t(99289),E=t.n(z),G=t(97857),c=t.n(G),w=t(5574),y=t.n(w),S=t(73829),H=t(88275),B=t(2453),N=t(74467),x=t(4393),P=t(7134),g=t(29905),U=t(9276),i=t(67294),v=t(33076),r=t(85893),J=function(){var L={current:1,pageSize:4,sortField:"createTime",sortOrder:"desc"},R=(0,i.useState)(c()({},L)),W=y()(R,2),f=W[0],K=W[1],D=(0,H.useModel)("@@initialState"),A=D.initialState,F=A!=null?A:{},n=F.currentUser,a=(0,i.useState)(),_=y()(a,2),u=_[0],e=_[1],h=(0,i.useState)(0),b=y()(h,2),p=b[0],T=b[1],d=(0,i.useState)(!0),Z=y()(d,2),X=Z[0],Y=Z[1],k=function(){var M=E()(I()().mark(function o(){var m,Q,V;return I()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Y(!0),s.prev=1,s.next=4,(0,S.MW)(f);case 4:m=s.sent,m.data?(e((Q=m.data.records)!==null&&Q!==void 0?Q:[]),T((V=m.data.total)!==null&&V!==void 0?V:0),m.data.records&&m.data.records.forEach(function(l){if(l.status==="succeed"){var C,te=JSON.parse((C=l.genChart)!==null&&C!==void 0?C:"{}");te.title=void 0,l.genChart=JSON.stringify(te)}})):B.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25"),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),B.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25\uFF0C"+s.t0.message);case 11:Y(!1);case 12:case"end":return s.stop()}},o,null,[[1,8]])}));return function(){return M.apply(this,arguments)}}();return(0,i.useEffect)(function(){k()},[f]),(0,r.jsxs)("div",{className:"my-chart-page",children:[(0,r.jsx)("div",{children:(0,r.jsx)(v.Z,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u8868\u540D\u79F0",enterButton:!0,loading:X,onSearch:function(o){K(c()(c()({},L),{},{name:o}))}})}),(0,r.jsx)("div",{className:"margin-16"}),(0,r.jsx)(N.Z,{grid:{gutter:16,xs:1,sm:1,md:1,lg:2,xl:2,xxl:2},pagination:{onChange:function(o,m){K(c()(c()({},f),{},{current:o,pageSize:m}))},current:f.current,pageSize:f.pageSize,total:p},loading:X,dataSource:u,renderItem:function(o){var m;return(0,r.jsx)(N.Z.Item,{children:(0,r.jsxs)(x.Z,{style:{width:"100%"},children:[(0,r.jsx)(N.Z.Item.Meta,{avatar:(0,r.jsx)(P.C,{src:n&&n.userAvatar}),title:o.name,description:o.chartType?"\u56FE\u8868\u7C7B\u578B\uFF1A"+o.chartType:void 0}),(0,r.jsxs)(r.Fragment,{children:[o.status==="wait"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.ZP,{status:"warning",title:"\u5F85\u751F\u6210",subTitle:(m=o.execMessage)!==null&&m!==void 0?m:"\u5F53\u524D\u56FE\u8868\u751F\u6210\u961F\u5217\u7E41\u5FD9\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019"})}),o.status==="running"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.ZP,{status:"info",title:"\u56FE\u8868\u751F\u6210\u4E2D",subTitle:o.execMessage})}),o.status==="succeed"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)("p",{children:"\u5206\u6790\u76EE\u6807\uFF1A"+o.goal}),(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)(U.Z,{option:o.genChart&&JSON.parse(o.genChart)})]}),o.status==="failed"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.ZP,{status:"error",title:"\u56FE\u8868\u751F\u6210\u5931\u8D25",subTitle:o.execMessage})})]})]})},o.id)}})]})};$.default=J},73829:function(q,$,t){t.d($,{I6:function(){return L},MW:function(){return v},VG:function(){return J},tK:function(){return W}});var O=t(52677),I=t.n(O),z=t(15009),E=t.n(z),G=t(97857),c=t.n(G),w=t(99289),y=t.n(w),S=t(88275);function H(n,a){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function N(n,a){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),x.apply(this,arguments)}function P(n,a){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function U(n,a){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/get",_objectSpread({method:"GET",params:_objectSpread({},a)},_||{})));case 1:case"end":return e.stop()}},n)})),i.apply(this,arguments)}function v(n,a){return r.apply(this,arguments)}function r(){return r=y()(E()().mark(function n(a,_){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.request)("/api/chart/my/list/page",c()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),r.apply(this,arguments)}function J(n,a,_,u){return j.apply(this,arguments)}function j(){return j=y()(E()().mark(function n(a,_,u,e){var h;return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return h=new FormData,u&&h.append("file",u),Object.keys(_).forEach(function(T){var d=_[T];d!=null&&h.append(T,I()(d)==="object"&&!(d instanceof File)?JSON.stringify(d):d)}),p.abrupt("return",(0,S.request)("/api/chart/gen",c()({method:"POST",params:c()({},a),data:h,requestType:"form"},e||{})));case 4:case"end":return p.stop()}},n)})),j.apply(this,arguments)}function L(n,a,_,u){return R.apply(this,arguments)}function R(){return R=y()(E()().mark(function n(a,_,u,e){var h;return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return h=new FormData,u&&h.append("file",u),Object.keys(_).forEach(function(T){var d=_[T];d!=null&&h.append(T,I()(d)==="object"&&!(d instanceof File)?JSON.stringify(d):d)}),p.abrupt("return",(0,S.request)("/api/chart/gen/async",c()({method:"POST",params:c()({},a),data:h,requestType:"form"},e||{})));case 4:case"end":return p.stop()}},n)})),R.apply(this,arguments)}function W(n,a){return f.apply(this,arguments)}function f(){return f=y()(E()().mark(function n(a,_){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,S.request)("/api/chart/list/page",c()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),f.apply(this,arguments)}function K(n,a){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/my/list/page",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),D.apply(this,arguments)}function A(n,a){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function n(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}},33076:function(q,$,t){var O=t(67294),I=t(25783),z=t(93967),E=t.n(z),G=t(42550),c=t(96159),w=t(14726),y=t(53124),S=t(98675),H=t(4173),B=t(82586),N=function(P,g){var U={};for(var i in P)Object.prototype.hasOwnProperty.call(P,i)&&g.indexOf(i)<0&&(U[i]=P[i]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,i=Object.getOwnPropertySymbols(P);v<i.length;v++)g.indexOf(i[v])<0&&Object.prototype.propertyIsEnumerable.call(P,i[v])&&(U[i[v]]=P[i[v]]);return U};const x=O.forwardRef((P,g)=>{const{prefixCls:U,inputPrefixCls:i,className:v,size:r,suffix:J,enterButton:j=!1,addonAfter:L,loading:R,disabled:W,onSearch:f,onChange:K,onCompositionStart:D,onCompositionEnd:A}=P,F=N(P,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:n,direction:a}=O.useContext(y.E_),_=O.useRef(!1),u=n("input-search",U),e=n("input",i),{compactSize:h}=(0,H.ri)(u,a),b=(0,S.Z)(s=>{var l;return(l=r!=null?r:h)!==null&&l!==void 0?l:s}),p=O.useRef(null),T=s=>{s!=null&&s.target&&s.type==="click"&&f&&f(s.target.value,s,{source:"clear"}),K==null||K(s)},d=s=>{var l;document.activeElement===((l=p.current)===null||l===void 0?void 0:l.input)&&s.preventDefault()},Z=s=>{var l,C;f&&f((C=(l=p.current)===null||l===void 0?void 0:l.input)===null||C===void 0?void 0:C.value,s,{source:"input"})},X=s=>{_.current||R||Z(s)},Y=typeof j=="boolean"?O.createElement(I.Z,null):null,k=`${u}-button`;let M;const o=j||{},m=o.type&&o.type.__ANT_BUTTON===!0;m||o.type==="button"?M=(0,c.Tm)(o,Object.assign({onMouseDown:d,onClick:s=>{var l,C;(C=(l=o==null?void 0:o.props)===null||l===void 0?void 0:l.onClick)===null||C===void 0||C.call(l,s),Z(s)},key:"enterButton"},m?{className:k,size:b}:{})):M=O.createElement(w.ZP,{className:k,type:j?"primary":void 0,size:b,disabled:W,key:"enterButton",onMouseDown:d,onClick:Z,loading:R,icon:Y},j),L&&(M=[M,(0,c.Tm)(L,{key:"addonAfter"})]);const Q=E()(u,{[`${u}-rtl`]:a==="rtl",[`${u}-${b}`]:!!b,[`${u}-with-button`]:!!j},v),V=s=>{_.current=!0,D==null||D(s)},ee=s=>{_.current=!1,A==null||A(s)};return O.createElement(B.Z,Object.assign({ref:(0,G.sQ)(p,g),onPressEnter:X},F,{size:b,onCompositionStart:V,onCompositionEnd:ee,prefixCls:e,addonAfter:M,suffix:J,onChange:T,className:Q,disabled:W}))});$.Z=x}}]);
